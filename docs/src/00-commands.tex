% Custom commands
\newcommand{\fixedfont}[1]{\textbf{\texttt{#1}}}
\newcommand{\txn}[1]{\textnormal{#1}}

\newcommand{\tabitem}{~~\llap{\textbullet}~~}

% Unindexed command (shell cmd, etc)
\newcommand{\cmd}[1]{\fixedfont{#1}}

% Change size of textsc 
\LetLtxMacro{\oldtextsc}{\textsc}
\renewcommand{\textsc}[1]{\oldtextsc{\scalefont{1.2}#1}}

% Spacing between rows of a table
\newcommand{\rowspace}{5pt}


% Custom size of text superscirpt
\newcommand{\supscrsize}{\scriptsize}

% Custom symbols
\newcommand{\M}{\hbox{$\txn{M}$}}
\newcommand{\Mtot}{\hbox{$\txn{M}_\txn{tot}$}}
\newcommand{\Mstar}{\hbox{$\txn{M}_{\ast}$}}
\newcommand{\Msun}{\hbox{$\txn{M}_{\odot}$}}
\newcommand{\Lsun}{\hbox{$\txn{L}_{\odot}$}}

\newcommand{\MsunYr}{\hbox{$\Msun\,\txn{yr}^{-1}$}}


\newcommand{\aFe}{\hbox{$[\alpha/\txn{Fe}]$}}
\newcommand{\FeH}{\hbox{$[\txn{Fe}/\txn{H}]$}}
\newcommand{\Zgas}{\hbox{$Z_\txn{gas}$}}
\newcommand{\Zsun}{\hbox{$Z_\odot$}}
\newcommand{\Zyoung}{\hbox{$Z_\txn{ young}$}}

\newcommand{\tauV}{\hbox{$\hat{\tau}_V$}}
\newcommand{\tauVbc}{\hbox{$\hat{\tau}^\txn{\supscrsize BC}_V$}}
\newcommand{\tauVism}{\hbox{$\hat{\tau}^\txn{\supscrsize ISM}_V$}}
\newcommand{\tauBp}{\hbox{$\hat{\tau}_{B,\perp}$}}
\newcommand{\Tthin}{\hbox{$\txn{t}_\txn{thin}$}}
\newcommand{\Tthick}{\hbox{$\txn{t}_\txn{thick}$}}
\newcommand{\Tbulge}{\hbox{$\txn{t}_\txn{bulge}$}}

\newcommand{\kms}{\hbox{$\txn{km}\,\txn{s}^{-1}$}}
\newcommand{\yr}{\hbox{$\txn{yr}$}}

\newcommand{\muLSF}{\hbox{$\mu_\txn{\supscrsize LSF}$}}
\newcommand{\sigLSF}{\hbox{$\sigma_\txn{\supscrsize LSF}$}}

\newcommand{\LnuUnits}{\hbox{$\txn{erg} \, \txn{s}^{-1} \, \txn{Hz}^{-1}$}}
\newcommand{\FnuUnits}{\hbox{$\txn{erg} \, \txn{s}^{-1} \, \txn{cm}^{-2} \, \txn{Hz}^{-1}$}}
\newcommand{\FlUnits}{\hbox{$\txn{erg} \, \txn{s}^{-1} \, \txn{cm}^{-2} \, \txn{\AA}^{-1}$}}

\newcommand{\LlamUnits}{\hbox{$\txn{erg} \, \txn{s}^{-1} \txn{AA}^{-1}$}}


\newcommand{\beagle}{\textsc{beagle}}

\newcommand{\placeholder}[1]{\fixedfont{#1}}
\newcommand{\optional}[1]{[ \hspace{5pt} #1 \hspace{5pt} ]}
\newcommand{\default}{\colorbox{lightgray}{default}}


% Colors matching the choses Pygemtize style (now "default")
\definecolor{NameAttribute}{HTML}{7D9029}
\definecolor{String}{HTML}{BA2121}

% Indexed commands
\newcommand{\env}[1]{\index{installation!\fixedfont{#1} environment variable}\fixedfont{#1}}
\newcommand{\cflag}[1]{\index{installation!\fixedfont{#1} compilation option}\fixedfont{#1}}
\newcommand{\depend}[1]{\index{installation!\fixedfont{#1} dependencies}\fixedfont{#1}}
\newcommand{\suggest}[1]{\index{installation!\fixedfont{#1} suggested package}\fixedfont{#1}}

\newcommand{\exec}[1]{\index{executable !\fixedfont{#1}}\fixedfont{#1}}

\newcommand{\ext}[1]{\index{output file!\fixedfont{#1} extension}\fixedfont{#1}}
\newcommand{\col}[1]{\index{output file!\fixedfont{#1} column}\fixedfont{#1}}

\newcommand{\textFile}[1]{\index{input file!\fixedfont{#1} ASCII file}\fixedfont{#1}}
\newcommand{\binFile}[1]{\index{input file!\fixedfont{#1} binary file}\fixedfont{#1}}

\newcommand{\keyword}[1]{\index{parameter file!\fixedfont{#1} keyword}\fixedfont{#1}}
\newcommand{\colkeyword}[1]{\index{parameter file!\fixedfont{#1} keyword}\textcolor{NameAttribute}{\fixedfont{#1}}}
\newcommand{\token}[1]{\index{parameter file!\fixedfont{#1} token}\fixedfont{#1}}
\newcommand{\coltoken}[1]{\index{parameter file!\fixedfont{#1} token}\textcolor{String}{\fixedfont{#1}}}

\newcommand{\param}[1]{\index{model parameters!\fixedfont{#1} adjustable parameter}\fixedfont{#1}}
\newcommand{\paramValue}[1]{\index{model parameters!\fixedfont{#1} adjustable parameter value}\fixedfont{#1}}

\newcommand{\logentry}[1]{\index{namelist parameters \& log entries!\fixedfont{#1} log entry}\fixedfont{#1}}
\newcommand{\util}[1]{\index{utilities \& directories!\fixedfont{#1} utility}\fixedfont{#1}}
\newcommand{\pkg}[1]{\index{utilities \& directories!\fixedfont{#1} package}\fixedfont{#1}}
\newcommand{\dir}[1]{\index{utilities \& directories!\fixedfont{#1} directory}\fixedfont{#1}}
\newcommand{\solver}[1]{\index{solvers!\fixedfont{#1} solver}\fixedfont{#1}}
\newcommand{\rsolver}[1]{\index{solvers!\fixedfont{#1} Riemann solver}\fixedfont{#1}}

% Array macros
\newcommand{\dblrule}{\hrule \vspace{1pt} \hrule height 0.8pt \relax}
\newcommand{\nmlparbox}[1]{\parbox{\linewidth}{\vspace{1mm}{#1}\vspace{1mm}}}

% Correct bug in minted when coloring the background (spaces above.below are removed....)
% see http://tex.stackexchange.com/questions/187382/possible-bug-in-minted-package

% from texdoc minted
%\makeatletter
%\renewenvironment{minted@colorbg}[1]{
%\setlength{\fboxsep}{-\fboxrule}
%\def\minted@bgcol{#1}
%\vspace{\abovedisplayskip}
%\noindent%
%\begin{lrbox}{\minted@bgbox}
%\begin{minipage}{\linewidth-2\fboxsep}}
 %{\end{minipage}
%\end{lrbox}%
%\vspace{\belowdisplayskip}%
%\colorbox{\minted@bgcol}{\usebox{\minted@bgbox}}}
%\makeatother

% Inline code
\definecolor{grey}{rgb}{0.95,0.95,0.95}
\newmintinline{fortran}{}
\newmintinline{bash}{}

\newminted{bash}{}


% Custom environments
\newenvironment{warning}%
   {  \begin{flushright}
	  \sffamily
      \begin{minipage}{16cm}
      \begin{tabular}{p{1.5cm}|p{12cm}}%
         { \vspace{-3mm} \includegraphics[width=1.5cm]{./img/warning.pdf} } & } %
   {  \end{tabular}%
      \end{minipage}%
      \end{flushright} }


%\multicolumn{1}{c}{\textbf{Physical module}}	    									& \multicolumn{1}{c}{\textbf{Adjustable parameters}}	 & \multicolumn{1}{c}{\textbf{Default range}}	& \multicolumn{1}{c}{\textbf{Physical meaning}}  & \multicolumn{1}{c}{\textbf{References}}  \\     

%  Define new column types that take their width as argument 
% es \begin{tabular}{| c | L{3cm} | C{3cm} | R{3cm} |}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\newenvironment{adjust_par_table}{% #1 = caption
%    \begin{table}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.30\linewidth-2\tabcolsep} L{0.15\linewidth-2\tabcolsep} L{0.55\linewidth-2\tabcolsep} }
         
          \toprule %
          
          \sffamily\bfseries \nmlparbox{Name(=default value)} & \sffamily\bfseries Unit & \sffamily\bfseries Description \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%    \end{table}
}

\newenvironment{keyword_table_token}{% #1 = caption
%    \begin{table}
%\begin{threeparttable}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.20\linewidth-2\tabcolsep} L{0.20\linewidth-2\tabcolsep} L{0.10\linewidth-2\tabcolsep} L{0.50\linewidth-2\tabcolsep} }
         
          \toprule %
          
          \sffamily\bfseries \nmlparbox{Keyword} & \sffamily\bfseries Token & \sffamily\bfseries Type & \sffamily\bfseries Description  \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%     \end{threeparttable}

%    \end{table}
}


\newenvironment{token_table}{% #1 = caption
%    \begin{table}
%\begin{threeparttable}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.35\linewidth-2\tabcolsep} L{0.10\linewidth-2\tabcolsep} L{0.55\linewidth-2\tabcolsep} }
         
          \toprule %
          
           \sffamily\bfseries Token & \sffamily\bfseries Type & \sffamily\bfseries Description  \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%     \end{threeparttable}

%    \end{table}
}


\newenvironment{keyword_table_option}{% #1 = caption
%    \begin{table}
%\begin{threeparttable}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.20\linewidth-2\tabcolsep} L{0.15\linewidth-2\tabcolsep} L{0.65\linewidth-2\tabcolsep} }
         
          \toprule %
          
          \sffamily\bfseries \nmlparbox{Keyword} & \sffamily\bfseries Type/Options & \sffamily\bfseries Description \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%     \end{threeparttable}

%    \end{table}
}


\newenvironment{keyword_table}{% #1 = caption
%    \begin{table}
%\begin{threeparttable}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.20\linewidth-2\tabcolsep} L{0.15\linewidth-2\tabcolsep} L{0.65\linewidth-2\tabcolsep} }
         
          \toprule %
          
          \sffamily\bfseries \nmlparbox{Keyword} & \sffamily\bfseries Type & \sffamily\bfseries Description \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%     \end{threeparttable}

%    \end{table}
}





\newenvironment{fits_table}{% #1 = caption
%    \begin{table}
%\begin{threeparttable}
    \centering
    \renewcommand{\arraystretch}{1.1}
    \begin{small}
    \begin{longtable}{ L{0.30\linewidth-2\tabcolsep} L{0.20\linewidth-2\tabcolsep} L{0.50\linewidth-2\tabcolsep} }
         
          \toprule %
          
          \sffamily\bfseries \nmlparbox{Column name} & \sffamily\bfseries Units & \sffamily\bfseries Description \\
           
          \midrule
}{
    \\\bottomrule
    \end{longtable}
     \end{small}
%     \end{threeparttable}

%    \end{table}
}

\newenvironment{packed_item}{
\begin{itemize}
  \setlength{\itemsep}{1pt}
  \setlength{\parskip}{0pt}
  \setlength{\parsep}{0pt}
}{\end{itemize}}

\newenvironment{nmltable}%
   {  \begin{center}
         \begin{small}
            \begin{tabular}[l]{m{0.3\textwidth}m{0.15\textwidth}m{0.45\textwidth}}%
               \toprule %
               \sffamily\bfseries \nmlparbox{Variable name, syntax\\and default value} & %
               \sffamily\bfseries Fortran type & %
               \sffamily\bfseries Description %
               \\ \toprule } %
   {           \\\bottomrule%
            \end{tabular}%
         \end{small}
      \end{center} }

\newcommand{\logfile}[2][1]{
   \VerbatimInput[
      frame=leftline,
      numbersep=2mm,
      stepnumber=1,
      numbers=left,
      firstnumber=#1,
      rulecolor={\color[rgb]{0.7,0.7,0.7}} ] {#2} }

\DefineVerbatimEnvironment%
   {Prompt}{Verbatim}
   {frame=single,
    numbers=none,
    rulecolor=\color[rgb]{0.7,0.7,0.7},
    commandchars=\\\{\} }
